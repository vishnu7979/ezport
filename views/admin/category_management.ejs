

<%- include("../partials/adminHeader.ejs") %>

        <!-- Sidebar End -->


        <!-- Content Start -->
        <div class="content">
            <!-- Navbar Start -->
            <%- include("../partials/adminNavbar.ejs") %>

            <!-- Navbar End -->


            <!-- Blank Start -->
            <div class="container-fluid">
                <div class="row vh-100 bg-secondary rounded align-items-center justify-content-center mx-0">
                    <main >
                        <div class="container">
                            <div class="hi"> 
                                <div class="category-container">
                                    <h4>Category Management</h4>
            
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Category Name</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% categories.forEach(category => { %>
                                                <% if (!category.isDeleted) { %>    
                                                    <tr>
                                                        <td><%= category.name %></td>
                                                        <td>
                                                            <a href="/admin/editcategory/<%= category.id %>"><button class="btn btn-success">Edit</button></a>
                                                            <button class="btn btn-danger" onclick="confirmDelete('<%= category.id %>')">Delete</button>
                                                        </td>
                                                    </tr>
                                                <% } %>
                                            <% }); %>
                                        </tbody>
                                    </table>
            
                                    <div class="create-button">
                                        <a href="/admin/addcategoryform"><button class="btn btn-primary">Create New</button></a>
                                        <a href="/admin/sendCategoryOffer"><button class="btn btn-info">Add new Offer</button></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            </div>
            
            <!-- Blank End -->

            <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
            <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
            <script>
                function confirmDelete(categoryId) {
                    swal({
                        title: "Are you sure?",
                        text: "If you delete the category, it will also delete all the products belonging to this category.",
                        icon: "warning",
                        buttons: true,
                        dangerMode: true,
                    })
                    .then((willDelete) => {
                        if (willDelete) {
                            // If user clicks "OK", redirect to the delete category route
                            window.location.href = `/admin/deletecategory/${categoryId}`;
                        }
                    });
                }
                </script>
            <!-- Footer Start -->
            <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
            <script src="/lib/chart/chart.min.js"></script>
            <script src="/lib/easing/easing.min.js"></script>
            <script src="/lib/waypoints/waypoints.min.js"></script>
            <script src="/lib/owlcarousel/owl.carousel.min.js"></script>
            <script src="/lib/tempusdominus/js/moment.min.js"></script>
            <script src="/lib/tempusdominus/js/moment-timezone.min.js"></script>
            <script src="/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>
            
            <!-- Template Javascript -->
            <script src="/adminjs/main.js"></script>
            </body>
            
            </html>
