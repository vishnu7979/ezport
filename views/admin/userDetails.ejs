     
            <%- include("../partials/adminHeader.ejs") %>


            <!-- Content Start -->
            <div class="content">
                <%- include("../partials/adminNavbar.ejs") %>
    
                <!-- Navbar End -->
    
    
                <!-- Table Start -->
                <div class="container-fluid pt-4 px-4">
                    <div class="row g-4">
            
                        <div class="col-12">
                            <div class="bg-secondary rounded h-100 p-4">
                                <h6 class="mb-4">Responsive Table</h6>
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Email</th>
                                                <th>Status</th>
                                                <th>Action</th>
                                                
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% users.forEach(user => { %>
                                                <tr>
                                                    <td><%= user.name %></td>
                                                    <td><%= user.email %></td>
                                                    <td><%= user.isblocked ? 'Blocked' : 'Active' %></td>
                                                    <td>
                                                        <% if (user.isblocked) { %>
                                                            <form id="unblockForm<%= user._id %>" action="/admin/unblockUser/<%= user._id %>" method="post">
                                                                <button type="button" class="btn btn-danger" onclick="confirmUnblock('<%= user._id %>')">Unblock</button>
                                                            </form>
                                                        <% } else { %>
                                                            <form id="blockForm<%= user._id %>" action="/admin/blockUser/<%= user._id %>" method="post">
                                                                <button type="button" class="btn btn-success" onclick="confirmBlock('<%= user._id %>')">Block</button>
                                                            </form>
                                                        <% } %>
                                                        
                                                        
                                                    </td>
                                                </tr>
                                            <% }); %>
                                           
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Bootstrap Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        function confirmBlock(userId) {
    Swal.fire({
        title: 'Are you sure?',
        text: 'You are about to block this user.',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, block it!'
    }).then((result) => {
        if (result.isConfirmed) {
            document.getElementById(`blockForm${userId}`).submit();
        }
    });
}

function confirmUnblock(userId) {
    Swal.fire({
        title: 'Are you sure?',
        text: 'You are about to unblock this user.',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, unblock it!'
    }).then((result) => {
        if (result.isConfirmed) {
            document.getElementById(`unblockForm${userId}`).submit();
        }
    });
}

    </script>
                
                <!-- Table End -->
    
                <%- include("../partials/adminfooter.ejs") %>
    
                